<!DOCTYPE html>
<html>
<head>
    <title>Register</title>
</head>
<body>
<form action="/register" method="post">
    <label for="username">아이디:</label>
    <input type="text" id="username" name="username">
    <button type="button" onclick="checkUsername()">중복검사</button>
    <div id="usernameCheckResult"></div>

    <label for="password">비밀번호:</label>
    <input type="password" id="password" name="password">

    <label for="confirmPassword">비밀번호 확인:</label>
    <input type="password" id="confirmPassword" name="confirmPassword">

    <label for="name">이름:</label>
    <input type="text" id="name" name="name">

    <label for="email">이메일:</label>
    <input type="email" id="email" name="email">
    <button type="button" onclick="sendVerificationCode()">인증번호 전송</button>

    <label for="emailVerificationCode">인증번호 입력:</label>
    <input type="text" id="emailVerificationCode" name="emailVerificationCode">

    <button type="submit">회원가입</button>
</form>

<script>
    function checkUsername() {
        const username = document.getElementById('username').value;
        fetch('/api/user/check-username?username=' + username, {
            method: 'GET',
            credentials: 'include'  // 세션 쿠키를 포함하여 요청을 보냅니다.
        })
            .then(response => {
                if (response.ok) {
                    return response.text();
                } else {
                    throw new Error('Username check failed');
                }
            })
            .then(data => {
                document.getElementById('usernameCheckResult').innerText = data;
            })
            .catch(error => {
                document.getElementById('usernameCheckResult').innerText = 'Error: ' + error.message;
            });
    }

    function sendVerificationCode() {
        const email = document.getElementById('email').value;
        // 이메일로 인증번호 전송하는 코드 추가
    }
</script>
</body>
</html>
